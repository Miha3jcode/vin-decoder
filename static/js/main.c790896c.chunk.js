(this["webpackJsonpvin-decoder"]=this["webpackJsonpvin-decoder"]||[]).push([[0],{101:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},130:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);n(101);var a=n(0),c=n.n(a),i=n(37),s=n.n(i),r=n(13),l=(n(109),n(4)),d=n(3),u=n(6),o=(n(110),n(28)),j=n(1),b=["className","field","label"];function p(e){return Object(j.jsx)("span",{className:"input__error",children:e})}var m=function(e){var t=e.className,n=e.field,a=e.label,c=Object(u.a)(e,b);return Object(j.jsxs)("label",Object(d.a)(Object(d.a)({},c),{},{className:["input",t].join(" "),children:[a?Object(j.jsx)("span",{className:"input__label",children:a}):null,Object(j.jsx)("input",Object(d.a)(Object(d.a)({},n),{},{className:"input__element"})),Object(j.jsx)(o.a,Object(d.a)(Object(d.a)({},n),{},{render:p}))]}))},O=(n(112),["className","children","type","disabled","onClick"]);var h=function(e){var t=e.className,n=e.children,a=e.type,c=e.disabled,i=e.onClick,s=Object(u.a)(e,O);return Object(j.jsx)("div",Object(d.a)(Object(d.a)({},s),{},{className:["button",t].join(" "),children:Object(j.jsx)("button",{className:"button__element",type:a,disabled:c,onClick:i,children:n})}))},v=(n(59),["className","children"]);var f=function(e){var t=e.className,n=e.children,a=Object(u.a)(e,v);return Object(j.jsx)("li",Object(d.a)(Object(d.a)({},a),{},{className:["list__item",t].join(" "),children:n}))},x=["className","children"];function N(e){var t=e.className,n=e.children,a=Object(u.a)(e,x);return Object(j.jsx)("ul",Object(d.a)(Object(d.a)({},a),{},{className:["list",t].join(" "),children:n}))}N.Item=f;var g=N,_=n(95),C=(n(127),["className","name","groupName","description","dataType"]);var y=function(e){var t=e.className,n=e.name,a=e.groupName,c=e.description,i=e.dataType,s=Object(u.a)(e,C);return Object(j.jsxs)("article",Object(d.a)(Object(d.a)({},s),{},{className:["variable",t].join(" "),children:[Object(j.jsx)("header",{className:"variable__header",children:Object(j.jsxs)("p",{className:"text",children:[n," ",a?"<".concat(a,">"):null]})}),i?Object(j.jsxs)("p",{className:"text",children:["DataType:"," ",Object(j.jsx)("span",{className:"subtext",children:i})]}):null,c?Object(j.jsxs)("p",{className:"text",children:["Description:"," ",Object(j.jsx)("span",{className:"subtext",children:c})]}):null]}))},V=["description"];var k=function(e){var t=e.description,n=Object(u.a)(e,V),c=Object(a.useMemo)((function(){return Object(_.a)(t)}),[t]);return Object(j.jsx)(y,Object(d.a)(Object(d.a)({},n),{},{description:c}))},I=(n(128),n(47),n(21)),S=["className"];var T=function(e){var t=e.className,n=Object(u.a)(e,S);return Object(j.jsxs)("header",Object(d.a)(Object(d.a)({},n),{},{className:["header",t].join(" "),children:[Object(j.jsx)(I.b,{to:"/",children:Object(j.jsx)("p",{className:"title",children:"Vin Decoder"})}),Object(j.jsx)("div",{children:Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:"header__links",children:[Object(j.jsx)("li",{className:"header__link",children:Object(j.jsx)(I.b,{to:"/",children:Object(j.jsx)("p",{className:"text",children:"home"})})}),Object(j.jsx)("li",{className:"header__link",children:Object(j.jsx)(I.b,{to:"/variables",children:Object(j.jsx)("p",{className:"text",children:"variables"})})})]})})})]}))},P=(n(130),n(43)),D={vin:P.b().required("The field is required").matches(/^[A-Z0-9]*$/,"Should consists only from uppercase letters and numbers").max(17,"Max length is 17 chars")};var w=function(e){var t=Object(r.b)();return Object(a.useCallback)((function(){return t(e.apply(void 0,arguments))}),[e,t])},L=n(30),q=n.n(L),A=n(58),M=n(24),F=n(39),R=n(99),B=n.n(R).a.create({baseURL:"https://vpic.nhtsa.dot.gov/api/"});B.defaults.timeout=15e3;var E=B,G={vehiclesAPI:{decode:function(e){return E.get("/vehicles/DecodeVin/".concat(e,"?format=json"))},getProperties:function(){return E.get("/vehicles/GetVehicleVariableList?format=json")}}},J=n(100);var H={mapProperty:function(e){return{id:Object(J.a)(),label:e.Variable,value:e.Value}},mapVariable:function(e){return{id:e.ID,description:e.Description,dataType:e.DataType,groupName:e.GroupName,name:e.Name}}},U={pendingCondition:function(e,t){if("pending"===(0,t.getState)().vehicles.loading)return!1}},Z="vehicles",$=Object(M.b)(Z+"/decodeVin",function(){var e=Object(A.a)(q.a.mark((function e(t,n){var a,c,i,s,r,l;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState,c=a(),i=c.vehicles.vins,!((s=i.findIndex((function(e){return e.vinCode===t})))>-1)){e.next=6;break}return e.abrupt("return",i[s]);case 6:return e.next=8,G.vehiclesAPI.decode(t);case 8:return r=e.sent,l=r.data.Results.filter((function(e){return e.Value})).map(H.mapProperty),e.abrupt("return",{vinCode:t,properties:l,message:r.data.Message});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{condition:U.pendingCondition}),z=Object(M.b)(Z+"/getVariables",Object(A.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.vehiclesAPI.getProperties();case 2:return t=e.sent,e.abrupt("return",t.data.Results.map(H.mapVariable));case 4:case"end":return e.stop()}}),e)}))),{condition:U.pendingCondition}),K=Object(M.c)({name:Z,initialState:{currentVinCode:null,cacheLimit:5,vins:[],loading:"idle",variables:[]},reducers:{},extraReducers:function(e){e.addCase($.pending,(function(e,t){e.loading=t.meta.requestStatus})),e.addCase($.fulfilled,(function(e,t){e.currentVinCode=t.payload.vinCode,e.loading=t.meta.requestStatus;var n=e.vins.findIndex((function(e){return e.vinCode===t.payload.vinCode}));n>-1?(e.vins.splice(n,1),e.vins.splice(0,0,t.payload)):(e.vins.splice(0,0,t.payload),e.vins.length>e.cacheLimit&&e.vins.splice(e.vins.length-1,1))})),e.addCase($.rejected,(function(e,t){e.loading=t.meta.requestStatus})),e.addCase(z.fulfilled,(function(e,t){e.variables=t.payload}))}}).reducer,Q=function(e){return e.vehicles.currentVinCode},W=function(e){return e.vehicles.vins},X=function(e){return"pending"===e.vehicles.loading},Y=function(e){return e.vehicles.variables},ee=Object(F.a)(W,(function(e){return e.map((function(e){return e.vinCode}))})),te=Object(F.a)(Q,W,(function(e,t){return t.find((function(t){return t.vinCode===e}))})),ne=P.a().shape({vin:D.vin}),ae={vin:""};var ce=function(){var e=w($),t=Object(r.c)(Q),n=Object(r.c)(X),c=Object(r.c)(te),i=Object(r.c)(ee),s=Object(a.useCallback)((function(t){return e(t.vin)}),[e]);return Object(j.jsxs)("div",{className:"main",children:[Object(j.jsx)(o.c,{initialValues:ae,validationSchema:ne,validateOnBlur:!0,validateOnChange:!0,onSubmit:s,children:function(e){var t=e.handleSubmit;return Object(j.jsxs)("div",{className:"main__form",children:[Object(j.jsx)(o.b,{label:"Vin:",name:"vin",component:m}),Object(j.jsx)(h,{className:"main__decode-button",type:"submit",disabled:n,onClick:t,children:"decode"})]})}}),Object(j.jsx)("p",{className:"title main__title",children:"History"}),Object(j.jsx)(g,{children:i?i.map((function(e,t){return Object(j.jsx)(g.Item,{children:Object(j.jsx)("p",{className:"subtext",children:e})},t)})):null}),Object(j.jsx)("p",{className:"title main__title",children:"Message:"}),c?Object(j.jsx)("p",{className:"subtext",children:c.message}):null,Object(j.jsxs)("p",{className:"title main__title",children:["Vin properties",t&&" (".concat(t,")"),":"]}),Object(j.jsx)(g,{children:c?c.properties.map((function(e){return Object(j.jsx)(g.Item,{children:Object(j.jsxs)("p",{className:"subtext",children:[Object(j.jsxs)("span",{className:"text",children:[e.label,":"]})," ",e.value]})},e.id)})):null})]})};n(248);var ie=function(){var e=w(z),t=Object(r.c)(Y);return Object(a.useEffect)((function(){return e()}),[e]),Object(j.jsxs)("div",{className:"variables",children:[Object(j.jsx)("p",{className:"title variables__title",children:"Variables:"}),Object(j.jsx)(g,{children:t?t.map((function(e){return Object(j.jsx)(g.Item,{children:Object(j.jsx)(k,{name:e.name,groupName:e.groupName,description:e.description,dataType:e.dataType})},e.id)})):null})]})};var se=function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(T,{}),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/",children:Object(j.jsx)(ce,{})}),Object(j.jsx)(l.a,{path:"/variables",children:Object(j.jsx)(ie,{})})]})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,250)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))},le={vehicles:K},de=Object(M.a)({reducer:le});s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(r.a,{store:de,children:Object(j.jsx)(I.a,{basename:"/vin-decoder",children:Object(j.jsx)(se,{})})})}),document.getElementById("root")),re()},47:function(e,t,n){},59:function(e,t,n){}},[[249,1,2]]]);
//# sourceMappingURL=main.c790896c.chunk.js.map