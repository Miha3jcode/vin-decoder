(this["webpackJsonpvin-decoder"]=this["webpackJsonpvin-decoder"]||[]).push([[0],{101:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},112:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},130:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);a(101);var n=a(0),c=a.n(n),i=a(38),r=a.n(i),s=a(6),l=(a(109),a(4)),u=a(3),d=a(7),o=(a(110),a(29)),b=a(1),j=["className","field","label"];function m(e){return Object(b.jsx)("span",{className:"input__error",children:e})}var p=function(e){var t=e.className,a=e.field,n=e.label,c=Object(d.a)(e,j);return Object(b.jsxs)("label",Object(u.a)(Object(u.a)({},c),{},{className:["input",t].join(" "),children:[n?Object(b.jsx)("span",{className:"input__label",children:n}):null,Object(b.jsx)("input",Object(u.a)(Object(u.a)({},a),{},{className:"input__element"})),Object(b.jsx)(o.a,Object(u.a)(Object(u.a)({},a),{},{render:m}))]}))},v=(a(112),["className","children","type","disabled","onClick"]);var O=function(e){var t=e.className,a=e.children,n=e.type,c=e.disabled,i=e.onClick,r=Object(d.a)(e,v);return Object(b.jsx)("div",Object(u.a)(Object(u.a)({},r),{},{className:["button",t].join(" "),children:Object(b.jsx)("button",{className:"button__element",type:n,disabled:c,onClick:i,children:a})}))},h=(a(59),["className","children"]);var f=function(e){var t=e.className,a=e.children,n=Object(d.a)(e,h);return Object(b.jsx)("li",Object(u.a)(Object(u.a)({},n),{},{className:["list__item",t].join(" "),children:a}))},x=["className","children"];function N(e){var t=e.className,a=e.children,n=Object(d.a)(e,x);return Object(b.jsx)("ul",Object(u.a)(Object(u.a)({},n),{},{className:["list",t].join(" "),children:a}))}N.Item=f;var g=N,V=a(95),_=(a(127),["className","name","groupName","description","dataType"]);var C=function(e){var t=e.className,a=e.name,n=e.groupName,c=e.description,i=e.dataType,r=Object(d.a)(e,_);return Object(b.jsxs)("article",Object(u.a)(Object(u.a)({},r),{},{className:["variable",t].join(" "),children:[Object(b.jsx)("header",{className:"variable__header",children:Object(b.jsxs)("p",{className:"text",children:[a," ",n?"<".concat(n,">"):null]})}),i?Object(b.jsxs)("p",{className:"text",children:["DataType:"," ",Object(b.jsx)("span",{className:"subtext",children:i})]}):null,c?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{className:"text",children:"Description:"}),Object(b.jsx)("div",{className:"variable__description",children:c})]}):null]}))},y=["description"];var I=function(e){var t=e.description,a=Object(d.a)(e,y),c=Object(n.useMemo)((function(){return Object(V.a)(t)}),[t]);return Object(b.jsx)(C,Object(u.a)(Object(u.a)({},a),{},{description:c}))},k=(a(128),a(31),a(14)),S=["className"];var L=function(e){var t=e.className,a=Object(d.a)(e,S);return Object(b.jsxs)("header",Object(u.a)(Object(u.a)({},a),{},{className:["header",t].join(" "),children:[Object(b.jsx)(k.b,{to:"/",children:Object(b.jsx)("p",{className:"title",children:"Vin Decoder"})}),Object(b.jsx)("div",{children:Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:"header__links",children:[Object(b.jsx)("li",{className:"header__link",children:Object(b.jsx)(k.b,{to:"/",children:Object(b.jsx)("p",{className:"text",children:"home"})})}),Object(b.jsx)("li",{className:"header__link",children:Object(b.jsx)(k.b,{to:"/variables",children:Object(b.jsx)("p",{className:"text",children:"variables"})})})]})})})]}))},P=(a(130),a(44)),T={vin:P.b().required("The field is required").matches(/^[A-Z0-9]*$/,"Should consists only from uppercase letters and numbers").max(17,"Max length is 17 chars")};var D=function(e){var t=Object(s.b)();return Object(n.useCallback)((function(){return t(e.apply(void 0,arguments))}),[e,t])},q=a(24),w=a.n(q),A=a(45),M=a(23),F=a(40),R=a(99),E=a.n(R).a.create({baseURL:"https://vpic.nhtsa.dot.gov/api/"});E.defaults.timeout=15e3;var B=E,G={vehiclesAPI:{decode:function(e){return B.get("/vehicles/DecodeVin/".concat(e,"?format=json"))},getProperties:function(){return B.get("/vehicles/GetVehicleVariableList?format=json")},getPropertyValues:function(e){return B.get("/vehicles/GetVehicleVariableValuesList/".concat(e,"?format=json"))}}},J=a(100);var H={mapProperty:function(e){return{id:Object(J.a)(),variableId:e.VariableId,valueId:e.ValueId,label:e.Variable,value:e.Value}},mapVariable:function(e){return{id:e.ID,description:e.Description,dataType:e.DataType,groupName:e.GroupName,name:e.Name}},mapVariableValue:function(e){return{id:e.Id,name:e.Name,variableName:e.ElementName}}};var U={pendingCondition:function(e,t){if("pending"===(0,t.getState)().vehicles.loading)return!1}},Z="vehicles",$=Object(M.b)(Z+"/decodeVin",function(){var e=Object(A.a)(w.a.mark((function e(t,a){var n,c,i,r,s,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.getState,c=n(),i=c.vehicles.vins,!((r=i.findIndex((function(e){return e.vinCode===t})))>-1)){e.next=6;break}return e.abrupt("return",i[r]);case 6:return e.next=8,G.vehiclesAPI.decode(t);case 8:return s=e.sent,l=s.data.Results.filter((function(e){return e.Value})).map(H.mapProperty),e.abrupt("return",{vinCode:t,properties:l,message:s.data.Message});case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),{condition:U.pendingCondition}),z=Object(M.b)(Z+"/getVariables",Object(A.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.vehiclesAPI.getProperties();case 2:return t=e.sent,e.abrupt("return",t.data.Results.map(H.mapVariable));case 4:case"end":return e.stop()}}),e)}))),{condition:U.pendingCondition}),K=Object(M.b)(Z+"/getVariableValues",function(){var e=Object(A.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.vehiclesAPI.getPropertyValues(t);case 2:return a=e.sent,e.abrupt("return",a.data.Results.map(H.mapVariableValue));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{condition:U.pendingCondition}),Q=Object(M.c)({name:Z,initialState:{currentVinCode:null,cacheLimit:5,vins:[],loading:"idle",variables:[],variableValues:[],variableValuesLoading:"idle"},reducers:{},extraReducers:function(e){e.addCase($.pending,(function(e,t){e.loading=t.meta.requestStatus})),e.addCase($.fulfilled,(function(e,t){e.currentVinCode=t.payload.vinCode,e.loading=t.meta.requestStatus;var a=e.vins.findIndex((function(e){return e.vinCode===t.payload.vinCode}));a>-1?(e.vins.splice(a,1),e.vins.splice(0,0,t.payload)):(e.vins.splice(0,0,t.payload),e.vins.length>e.cacheLimit&&e.vins.splice(e.vins.length-1,1))})),e.addCase($.rejected,(function(e,t){e.loading=t.meta.requestStatus})),e.addCase(z.fulfilled,(function(e,t){e.variables=t.payload})),e.addCase(K.pending,(function(e,t){e.variableValuesLoading=t.meta.requestStatus})),e.addCase(K.fulfilled,(function(e,t){e.variableValues=t.payload,e.variableValuesLoading=t.meta.requestStatus})),e.addCase(K.rejected,(function(e,t){e.variableValuesLoading=t.meta.requestStatus}))}}).reducer,W=function(e){return e.vehicles.currentVinCode},X=function(e){return e.vehicles.vins},Y=function(e){return"pending"===e.vehicles.loading},ee=function(e){return e.vehicles.variables},te=function(e){return e.vehicles.variableValues},ae=function(e){return e.vehicles.variableValuesLoading},ne=Object(F.a)(X,(function(e){return e.map((function(e){return e.vinCode}))})),ce=Object(F.a)(W,X,(function(e,t){return t.find((function(t){return t.vinCode===e}))})),ie=Object(F.a)(te,(function(e){var t=e.find((function(e){return e.variableName}));return t?t.variableName:""})),re=P.a().shape({vin:T.vin}),se={vin:""};var le=function(){var e=D($),t=Object(s.c)(W),a=Object(s.c)(Y),c=Object(s.c)(ce),i=Object(s.c)(ne),r=Object(n.useCallback)((function(t){return e(t.vin)}),[e]),l=Object(n.useCallback)((function(t){return function(e,t){e.preventDefault(),t(e.target.dataset.code)}(t,e)}),[e]);return Object(b.jsxs)("main",{className:"main-screen",children:[Object(b.jsx)(o.c,{initialValues:se,validationSchema:re,validateOnBlur:!0,validateOnChange:!0,onSubmit:r,children:function(e){var t=e.handleSubmit;return Object(b.jsxs)("div",{className:"main-screen__form",children:[Object(b.jsx)(o.b,{label:"Vin:",name:"vin",component:p}),Object(b.jsx)(O,{className:"main-screen__decode-button",type:"submit",disabled:a,onClick:t,children:"decode"})]})}}),Object(b.jsx)("p",{className:"title main-screen__title",children:"History"}),Object(b.jsx)(g,{children:i?i.map((function(e,t){return Object(b.jsx)(g.Item,{children:Object(b.jsx)("a",{href:"#","data-code":e,onClick:l,children:e})},t)})):null}),Object(b.jsx)("p",{className:"title main-screen__title",children:"Message:"}),c?Object(b.jsx)("p",{className:"subtext",children:c.message}):null,Object(b.jsxs)("p",{className:"title main-screen__title",children:["Vin properties",t&&" (".concat(t,")"),":"]}),Object(b.jsx)(g,{children:c?c.properties.map((function(e){var t=e.valueId?Object(b.jsx)(k.b,{to:"/variables/".concat(e.variableId),children:e.label}):e.label;return Object(b.jsx)(g.Item,{children:Object(b.jsxs)("p",{className:"subtext",children:[Object(b.jsxs)("span",{className:"text",children:[t,":"]})," ",e.value]})},e.id)})):null})]})};a(248);var ue=function(){var e=D(z),t=Object(s.c)(ee);return Object(n.useEffect)((function(){return e()}),[e]),Object(b.jsxs)("main",{className:"variables-screen",children:[Object(b.jsx)("p",{className:"title variables-screen__title",children:"Variables:"}),Object(b.jsx)(g,{children:t?t.map((function(e){return Object(b.jsx)(g.Item,{children:Object(b.jsx)(I,{name:e.name,groupName:e.groupName,description:e.description,dataType:e.dataType})},e.id)})):null})]})};a(249);var de=function(){var e=Object(l.f)(),t=Object(n.useMemo)((function(){return e.pathname.split("/").reverse().slice(0,2).find((function(e){return e}))}),[e.pathname]),a=D(K),c=Object(s.c)(te),i=Object(s.c)(ie),r=Object(s.c)(ae);return Object(n.useEffect)((function(){a(t)}),[t,a]),Object(b.jsxs)("main",{className:"variable-screen",children:[Object(b.jsxs)("p",{className:"title variable-screen__title",children:["Variable:"," ",i]}),Object(b.jsx)(g,{children:"fulfilled"===r?c.map((function(e){return Object(b.jsx)(g.Item,{children:Object(b.jsxs)("p",{className:"text",children:["Id:"," ",Object(b.jsx)("span",{className:"subtext",children:e.id}),", ","Name:"," ",Object(b.jsx)("span",{className:"subtext",children:e.name})]})},e.id)})):null})]})};var oe=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(L,{}),Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{exact:!0,path:"/",children:Object(b.jsx)(le,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/variables",children:Object(b.jsx)(ue,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/variables/:variableId",children:Object(b.jsx)(de,{})})]})]})},be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,251)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))},je={vehicles:Q},me=Object(M.a)({reducer:je});r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(s.a,{store:me,children:Object(b.jsx)(k.a,{basename:"/vin-decoder",children:Object(b.jsx)(oe,{})})})}),document.getElementById("root")),be()},31:function(e,t,a){},59:function(e,t,a){}},[[250,1,2]]]);
//# sourceMappingURL=main.e5759677.chunk.js.map