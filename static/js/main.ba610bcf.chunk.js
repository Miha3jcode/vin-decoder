(this["webpackJsonpvin-decoder"]=this["webpackJsonpvin-decoder"]||[]).push([[0],{101:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},209:function(e,t,n){},211:function(e,t,n){},226:function(e,t,n){},246:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);n(101);var a=n(0),c=n.n(a),i=n(36),r=n.n(i),s=n(13),l=(n(109),n(4)),u=(n(58),n(110),n(42)),d={vin:u.b().required("The field is required").matches(/^[A-Z0-9]*$/,"Should consists only from uppercase letters and numbers").max(17,"Max length is 17 chars")},o=n(27);var j=function(e){var t=Object(s.b)();return Object(a.useCallback)((function(){return t(e.apply(void 0,arguments))}),[e,t])},b=n(3),p=n(11),m=(n(209),n(1)),O=["className","field","label"];function v(e){return Object(m.jsx)("span",{className:"input__error",children:e})}var h=function(e){var t=e.className,n=e.field,a=e.label,c=Object(p.a)(e,O);return Object(m.jsxs)("label",Object(b.a)(Object(b.a)({},c),{},{className:["input",t].join(" "),children:[a?Object(m.jsx)("span",{className:"input__label",children:a}):null,Object(m.jsx)("input",Object(b.a)(Object(b.a)({},n),{},{className:"input__element"})),Object(m.jsx)(o.a,Object(b.a)(Object(b.a)({},n),{},{render:v}))]}))},f=(n(211),["className","children","type","disabled","onClick"]);var x=function(e){var t=e.className,n=e.children,a=e.type,c=e.disabled,i=e.onClick,r=Object(p.a)(e,f);return Object(m.jsx)("div",Object(b.a)(Object(b.a)({},r),{},{className:["button",t].join(" "),children:Object(m.jsx)("button",{className:"button__element",type:a,disabled:c,onClick:i,children:n})}))},N=(n(81),["className","children"]);var g=function(e){var t=e.className,n=e.children,a=Object(p.a)(e,N);return Object(m.jsx)("li",Object(b.a)(Object(b.a)({},a),{},{className:["list__item",t].join(" "),children:n}))},C=["className","children"];function _(e){var t=e.className,n=e.children,a=Object(p.a)(e,C);return Object(m.jsx)("ul",Object(b.a)(Object(b.a)({},a),{},{className:["list",t].join(" "),children:n}))}_.Item=g;var y=_,V=n(98),I=(n(226),["className","name","groupName","description","dataType"]);var S=function(e){var t=e.className,n=e.name,a=e.groupName,c=e.description,i=e.dataType,r=Object(p.a)(e,I);return Object(m.jsxs)("article",Object(b.a)(Object(b.a)({},r),{},{className:["variable",t].join(" "),children:[Object(m.jsx)("header",{className:"variable__header",children:Object(m.jsxs)("p",{className:"text",children:[n," ",a?"<".concat(a,">"):null]})}),i?Object(m.jsxs)("p",{className:"text",children:["DataType:"," ",Object(m.jsx)("span",{className:"subtext",children:i})]}):null,c?Object(m.jsxs)("p",{className:"text",children:["Description:"," ",Object(m.jsx)("span",{className:"subtext",children:c})]}):null]}))},k=["description"];var T=function(e){var t=e.description,n=Object(p.a)(e,k),c=Object(a.useMemo)((function(){return Object(V.a)(t)}),[t]);return Object(m.jsx)(S,Object(b.a)(Object(b.a)({},n),{},{description:c}))},P=n(29),D=n.n(P),w=n(55),L=n(23),q=n(38),A=n(99),M=n.n(A).a.create({baseURL:"https://vpic.nhtsa.dot.gov/api/"});M.defaults.timeout=15e3;var F=M,R={vehiclesAPI:{decode:function(e){return F.get("/vehicles/DecodeVin/".concat(e,"?format=json"))},getProperties:function(){return F.get("/vehicles/GetVehicleVariableList?format=json")}}},B=n(100);var E={mapProperty:function(e){return{id:Object(B.a)(),label:e.Variable,value:e.Value}},mapVariable:function(e){return{id:e.ID,description:e.Description,dataType:e.DataType,groupName:e.GroupName,name:e.Name}}},G={pendingCondition:function(e,t){if("pending"===(0,t.getState)().vehicles.loading)return!1}},J="vehicles",H=Object(L.b)(J+"/decodeVin",function(){var e=Object(w.a)(D.a.mark((function e(t,n){var a,c,i,r,s,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState,c=a(),i=c.vehicles.vins,!((r=i.findIndex((function(e){return e.vinCode===t})))>-1)){e.next=6;break}return e.abrupt("return",i[r]);case 6:return e.next=8,R.vehiclesAPI.decode(t);case 8:return s=e.sent,l=s.data.Results.filter((function(e){return e.Value})).map(E.mapProperty),e.abrupt("return",{vinCode:t,properties:l,message:s.data.Message});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{condition:G.pendingCondition}),U=Object(L.b)(J+"/getVariables",Object(w.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.vehiclesAPI.getProperties();case 2:return t=e.sent,e.abrupt("return",t.data.Results.map(E.mapVariable));case 4:case"end":return e.stop()}}),e)}))),{condition:G.pendingCondition}),Z=Object(L.c)({name:J,initialState:{currentVinCode:null,cacheLimit:5,vins:[],loading:"idle",variables:[]},reducers:{},extraReducers:function(e){e.addCase(H.pending,(function(e,t){e.loading=t.meta.requestStatus})),e.addCase(H.fulfilled,(function(e,t){e.currentVinCode=t.payload.vinCode,e.loading=t.meta.requestStatus;var n=e.vins.findIndex((function(e){return e.vinCode===t.payload.vinCode}));n>-1?(e.vins.splice(n,1),e.vins.splice(0,0,t.payload)):(e.vins.splice(0,0,t.payload),e.vins.length>e.cacheLimit&&e.vins.splice(e.vins.length-1,1))})),e.addCase(H.rejected,(function(e,t){e.loading=t.meta.requestStatus})),e.addCase(U.fulfilled,(function(e,t){e.variables=t.payload}))}}).reducer,$=function(e){return e.vehicles.currentVinCode},z=function(e){return e.vehicles.vins},K=function(e){return"pending"===e.vehicles.loading},Q=function(e){return e.vehicles.variables},W=Object(q.a)(z,(function(e){return e.map((function(e){return e.vinCode}))})),X=Object(q.a)($,z,(function(e,t){return t.find((function(t){return t.vinCode===e}))})),Y=u.a().shape({vin:d.vin}),ee={vin:""};var te=function(){var e=j(H),t=Object(s.c)($),n=Object(s.c)(K),c=Object(s.c)(X),i=Object(s.c)(W),r=Object(a.useCallback)((function(t){return e(t.vin)}),[e]);return Object(m.jsxs)("div",{className:"main",children:[Object(m.jsx)(o.c,{initialValues:ee,validationSchema:Y,validateOnBlur:!0,validateOnChange:!0,onSubmit:r,children:function(e){var t=e.handleSubmit;return Object(m.jsxs)("div",{className:"main__form",children:[Object(m.jsx)(o.b,{label:"Vin:",name:"vin",component:h}),Object(m.jsx)(x,{className:"main__decode-button",type:"submit",disabled:n,onClick:t,children:"decode"})]})}}),Object(m.jsx)("p",{className:"title main__title",children:"History"}),Object(m.jsx)(y,{children:i?i.map((function(e,t){return Object(m.jsx)(y.Item,{children:Object(m.jsx)("p",{className:"subtext",children:e})},t)})):null}),Object(m.jsx)("p",{className:"title main__title",children:"Message:"}),c?Object(m.jsx)("p",{className:"subtext",children:c.message}):null,Object(m.jsxs)("p",{className:"title main__title",children:["Vin properties",t&&" (".concat(t,")"),":"]}),Object(m.jsx)(y,{children:c?c.properties.map((function(e){return Object(m.jsx)(y.Item,{children:Object(m.jsxs)("p",{className:"subtext",children:[Object(m.jsxs)("span",{className:"text",children:[e.label,":"]})," ",e.value]})},e.id)})):null})]})};n(246);var ne=function(){var e=j(U),t=Object(s.c)(Q);return Object(a.useEffect)((function(){return e()}),[e]),Object(m.jsxs)("div",{className:"variables",children:[Object(m.jsx)("p",{className:"title variables__title",children:"Variables:"}),Object(m.jsx)(y,{children:t?t.map((function(e){return Object(m.jsx)(y.Item,{children:Object(m.jsx)(T,{name:e.name,groupName:e.groupName,description:e.description,dataType:e.dataType})},e.id)})):null})]})};var ae=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",children:Object(m.jsx)(te,{})}),Object(m.jsx)(l.a,{path:"/variables",children:Object(m.jsx)(ne,{})})]})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,249)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},ie={vehicles:Z},re=Object(L.a)({reducer:ie}),se=n(53);r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(s.a,{store:re,children:Object(m.jsx)(se.a,{basename:"/vin-decoder",children:Object(m.jsx)(ae,{})})})}),document.getElementById("root")),ce()},58:function(e,t,n){},81:function(e,t,n){}},[[248,1,2]]]);
//# sourceMappingURL=main.ba610bcf.chunk.js.map